#-*- coding:utf-8 -*-
#!/usr/bin/python
'''
手写字体 特征降维  主成份分析  PCA 
'''
import pandas as pd               # 数据处理
import numpy as np
#######数据获取#######
# 使用pandas分别读取训练数据与测试数据集
## 从网络获取
'''
digits_train = pd.read_csv('https://archive.ics.uci.edu/ml/machine-learning-databases/optdigits/optdigits.tra', header=None)
digits_test = pd.read_csv('https://archive.ics.uci.edu/ml/machine-learning-databases/optdigits/optdigits.tes', header=None)
digits_train.to_csv("MNIST/train.csv")
digits_test.to_csv("MNIST/test.csv")
'''
## 从本地打开(数据有点问题)
digits_train = pd.read_csv("MNIST/train.csv")
digits_test  = pd.read_csv("MNIST/test.csv")

# 分割训练数据的特征向量和标记
X_digits = digits_train[map(str,np.arange(64))]# 安照 关键字方式过滤
y_digits = digits_train['64']

# 从sklearn.decomposition导入PCA
from sklearn.decomposition import PCA
# 初始化一个可以将高维度特征向量（64维）压缩至2个维度的PCA
estimator = PCA(n_components=2)
X_pca = estimator.fit_transform(X_digits)

# 显示10类手写体数字图片经PCA压缩后的2维空间分布
from matplotlib import pyplot as plt

def plot_pca_scatter():
    colors = ['black', 'blue', 'purple', 'yellow', 'white', 'red', 'lime', 'cyan', 'orange', 'gray']
    for i in xrange(len(colors)):
	px = X_pca[:, 0][y_digits.as_matrix() == i] # 各种数字  提取出来
	py = X_pca[:, 1][y_digits.as_matrix()== i]
	plt.scatter(px, py, c=colors[i]) #对于各种数字 不同颜色显示
    plt.legend(np.arange(0,10).astype(str))
    plt.xlabel(u'第一主成份')
    plt.ylabel(u'第二主成份')
    plt.show()
# 显示 降维后的训练数据
plot_pca_scatter()


# 对训练数据、测试数据进行特征向量（图片像素）与分类目标的分隔
X_train = digits_train[map(str,np.arange(64))]
y_train = digits_train['64'] # 标签 
X_test = digits_test[map(str,np.arange(64))]
y_test = digits_test['64']














